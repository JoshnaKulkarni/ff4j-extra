<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:include="header :: head"></head>
<body>
  
<div class="navbar navbar-fixed-top" th:include="navbar :: navbar"></div>

<div class="subnavbar" th:include="navbar :: subnavbar"></div>

<div id="wrapper" class="container" >
 <div class="row">
  <div class="span9"> 
   <div id="content" class="clearfix" >
    <div class="main-inner" style="margin-top:60px">
     <div class="container">
     
  <div th:if="${msgInfo} != null">
   <div class="alert" th:class="'alert alert-' + ${msgType}" style="margin-left:50px;margin-right:20px">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <span style="font-style:normal;color:#696969" th:text="${msgInfo}">---</span>
   </div>
  </div>
  
  <div id="message" >&nbsp;</div>
     
  <div class="span12">

   <div class="widget widget-nopad">
   
    <div class="widget-header">
	 <i class="icon-th-list"></i>
	 <h3><span th:text="#{feature.title}" >Features</span></h3>
    </div>

   <div class="widget-content">
    
   <div style="float:right;margin:10px;font-size:10px">
    <button type="button" class="btn btn-green" data-toggle="modal" href="#modalCreate">
       <i class="icon-plus icon-white" style="margin-left:10px"></i>
       <span>New</span>
   </button>
   <button type="button" class="btn btn-green" data-toggle="modal" href="#modalToggle" > 
    <i class="icon-th-list icon-white"></i>
    <span>Toggle Group</span>
   </button>
  </div>
  
   
   
	<table class="table table-striped table-bordered">
     <thead>
      <tr>
       <th style="width:15%;text-align:center"><span th:text="#{feature.table.name}">Feature</span></th>
       <th style="width:15%;text-align:center"><span th:text="#{feature.table.group}">Group</span></th>
       <th style="width:20%;text-align:center"><span th:text="#{feature.table.role}">Permissions</span></th>
       <th style="width:32%;text-align:center"><span th:text="#{feature.table.strategy}">Strategy</span></th>
       <th style="width:8%;text-align:center"><span th:text="#{feature.table.toggle}">Toggle</span></th>
       <th style="width:5%;text-align:center">E</th>
       <th style="width:5%;text-align:center">D</th>
      </tr>
    </thead>
    <tbody>
     <tr th:each="feat : ${listOfFeatures}">
	  <td><a class="ff4j-tooltip" tooltip="" th:attr="tooltip=${feat.description}" style="color:#5C5EDC">
	    <span th:text="${feat.uid}">uid</span></a>
	  </td>
	  <td>
	   <span th:text="${feat.group}">---</span>
	  </td>
	  <td>
	  	<span th:each="perm,iterStat : ${feat.permissions}">
	  		<span th:text="${iterStat.index == 0} ? ${perm} : ',' + ${perm}" >element</span>
	  	</span>
	  </td>
	 <td style="word-break: break-all;">
	   <span th:text="${feat.flippingStrategy}">---</span>
	 </td>
	 <td style="width:8%;text-align:center">
	  <label class="switch switch-green">
	   <input th:attr="id=${feat.uid}" id="x" 
	   		  type="checkbox" class="switch-input" onclick="javascript:toggle(this)" th:checked="${feat.enable}"/>
		<span class="switch-label" data-on="On" data-off="Off"></span>
		<span class="switch-handle"></span>
	  </label>
	 </td>
	 <td style="width:5%;text-align:center">
	  <a data-toggle="modal" href="#modalEdit" 
	     th:attr="data-id=${feat.uid},
	        data-desc=${feat.description},
	        data-group=${feat.group}, 
	        data-strategy=${feat.flippingStrategy} ? ${feat.flippingStrategy.class.name} : '',
	        data-stratparams=${feat.flippingStrategy} ? ${feat.flippingStrategy.initParams} : '', 
	        data-permissions=${feat.permissions}"
	     data-id="" data-desc="" data-group="null" data-strategy="" data-stratparams=""
		 data-permissions="[ADMIN]"
		 style="width:6px:margin-left:-3px;color:white;background-color:#008bab" 
		 class="open-EditFlipDialog btn">
       <i class="icon-pencil"></i>
	  </a>
	 </td>
	 <td style="width:5%;text-align:center">
	 	<a href="" style="width:6px:margin-left:-3px;color:white;background-color:#ab0000" 
	 	     class="btn" th:href="@{features} + '?op=delete&amp;uid=' + ${feat.uid}">
	     <i class="icon-trash"></i>
	    </a>
	 </td>
	</tr>
	</tbody>
    </table>
    </div>
   </div>
  </div>
     
	 </div>
	</div>
   </div>
  </div>
 </div>
</div>
   
<div th:include="modal-features :: modal-edit"></div>

</body>
</html>