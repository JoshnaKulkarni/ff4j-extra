format 72
"orm" // com::logica::bpm::orm
  revision 1
  modified_by 100 "lunvenc"
  // class settings
  //class diagram settings
  draw_all_relations default hide_attributes default hide_operations default hide_getset_operations default show_members_full_definition default show_members_visibility default show_members_stereotype default show_members_multiplicity default show_members_initialization default show_attribute_modifiers default member_max_width 0 show_parameter_dir default show_parameter_name default package_name_in_tab default class_drawing_mode default drawing_language default show_context_mode default auto_label_position default show_relation_modifiers default show_relation_visibility default show_infonote default shadow default show_stereotype_properties default
  //use case diagram settings
  package_name_in_tab default show_context default auto_label_position default draw_all_relations default class_drawing_mode default shadow default show_stereotype_properties default
  //sequence diagram settings
  show_full_operations_definition default write_horizontally default class_drawing_mode default drawing_language default draw_all_relations default shadow default show_stereotype_properties default
  //collaboration diagram settings
  show_full_operations_definition default show_hierarchical_rank default write_horizontally default drawing_language default package_name_in_tab default show_context default draw_all_relations default shadow default show_stereotype_properties default
  //object diagram settings
   write_horizontally default package_name_in_tab default show_context default auto_label_position default draw_all_relations default shadow default show_stereotype_properties default
  //component diagram settings
  package_name_in_tab default show_context default auto_label_position default draw_all_relations default shadow default
  draw_component_as_icon default show_component_req_prov default show_component_rea default show_stereotype_properties default
  //deployment diagram settings
  package_name_in_tab default show_context default write_horizontally default auto_label_position default draw_all_relations default shadow default
  draw_component_as_icon default show_component_req_prov default show_component_rea default show_stereotype_properties default
  //state diagram settings
  package_name_in_tab default show_context default auto_label_position default write_trans_label_horizontally default show_trans_definition default draw_all_relations default shadow default
  show_activities default region_horizontally default drawing_language default show_stereotype_properties default
  //activity diagram settings
  package_name_in_tab default show_context default show_opaque_action_definition default auto_label_position default write_flow_label_horizontally default draw_all_relations default shadow default
  show_infonote default drawing_language default show_stereotype_properties default
  
  java_dir "d:/WORK/Workspaces/workspace-bpm/LOGICA/trunk/bpm-api/src/main/java/com/logica/bpm/orm/"
  java_package "com.logica.bpm.orm"
  package_ref 128996 // support

  classview 131940 "orm"
    //class diagram settings
    draw_all_relations default hide_attributes default hide_operations default hide_getset_operations default show_members_full_definition default show_members_visibility default show_members_stereotype default show_members_multiplicity default show_members_initialization default show_attribute_modifiers default member_max_width 0 show_parameter_dir default show_parameter_name default package_name_in_tab default class_drawing_mode default drawing_language default show_context_mode default auto_label_position default show_relation_modifiers default show_relation_visibility default show_infonote default shadow default show_stereotype_properties default
    //collaboration diagram settings
    show_full_operations_definition default show_hierarchical_rank default write_horizontally default drawing_language default package_name_in_tab default show_context default draw_all_relations default shadow default show_stereotype_properties default
    //object diagram settings
     write_horizontally default package_name_in_tab default show_context default auto_label_position default draw_all_relations default shadow default show_stereotype_properties default
    //sequence diagram settings
    show_full_operations_definition default write_horizontally default class_drawing_mode default drawing_language default draw_all_relations default shadow default show_stereotype_properties default
    //state diagram settings
    package_name_in_tab default show_context default auto_label_position default write_trans_label_horizontally default show_trans_definition default draw_all_relations default shadow default
    show_activities default region_horizontally default drawing_language default show_stereotype_properties default
    //class settings
    //activity diagram settings
    package_name_in_tab default show_context default show_opaque_action_definition default auto_label_position default write_flow_label_horizontally default draw_all_relations default shadow default
    show_infonote default drawing_language default show_stereotype_properties default
    class 143204 "BpmAccessor"
      abstract visibility public 
      cpp_decl ""
      java_decl "${comment}${@}${visibility}${final}${abstract}class ${name}${extends}${implements} {
${members}}
"
      php_decl ""
      python_2_2 python_decl ""
      idl_decl ""
      explicit_switch_type ""
      
      comment "Base class for {@link com.logica.bpm.orm.support.BpmTemplate} and
other BPM-accessing DAO helpers, defining common properties such as
DataSource, Connection Factory and exception translator.

<p>Not intended to be used directly.
See {@link com.logica.bpm.orm.support.BpmTemplate}.
SuperClass for bpm templates. This allow to define a datasource which will provide connection to the bpm engine.

@since 20.10.2009
@version 1.0
@author <a href=\"mailto:cedrick.lunven@free.fr\">C&eacute;drick LUNVEN</a>
@see com.logica.bpm.orm.support.BpmTemplate"
      classrelation 144100 // dataSource (<unidirectional association>)
	relation 144100 --->
	  a role_name "dataSource" private
	    comment " DataSource Element. *
"
	    java "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${type} ${name}${value};
"
	    classrelation_ref 144100 // dataSource (<unidirectional association>)
	  b parent class_ref 141028 // BpmDataSource
      end

      classrelation 144228 // connectionFactory (<unidirectional association>)
	relation 144228 --->
	  a role_name "connectionFactory" private
	    comment " Data Source to Access BPM Element. *
"
	    java "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${type} ${name}${value};
"
	    classrelation_ref 144228 // connectionFactory (<unidirectional association>)
	  b parent class_ref 142180 // BpmConnectionFactory
      end

      operation 196196 "afterPropertiesSet"
	public explicit_return_type "void"
	nparams 0
	nexceptions 1
	  explicit_exception "Exception"
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment " {@inheritDoc} *"
      end

      operation 196324 "getConnectionFactory"
	public return_type class_ref 142180 // BpmConnectionFactory
	nparams 0
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Getter method for property connectionFactory.
@return the connectionFactory value"
      end

      operation 196452 "setConnectionFactory"
	public explicit_return_type "void"
	nparams 1
	  param in name "pconnectionFactory" type class_ref 142180 // BpmConnectionFactory
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Setter method for property connectionFactory.
@param pconnectionFactory
           the connectionFactory to set"
      end

      operation 196580 "getDataSource"
	public return_type class_ref 141028 // BpmDataSource
	nparams 0
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Getter method for property dataSource.
@return the dataSource value"
      end

      operation 196708 "setDataSource"
	public explicit_return_type "void"
	nparams 1
	  param in name "pdataSource" type class_ref 141028 // BpmDataSource
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Setter method for property dataSource.
@param pdataSource
           the dataSource to set"
      end
    end

    class 143332 "BpmEntityManager"
      visibility public 
      cpp_decl ""
      java_decl "${comment}${@}${visibility}${final}${abstract}class ${name}${extends}${implements} {
${members}}
"
      php_decl ""
      python_2_2 python_decl ""
      idl_decl ""
      explicit_switch_type ""
      
      comment "Using AnnotationDriven we could mapping from BPMObject result to custom bean.

It will not laod eveyr bean at classloading but will register each bean each time it
will be use. The first access it could be a bit longer but it's will use less memory.

@author <a href=\"mailto:cedrick.lunven@gmail.com\">C&eacute;drick LUNVEN</a>"
      attribute 165092 "KEY_CANNOTMAPPING_ANNOTATION_PROCESS"
	class_attribute const_attribute private explicit_type "String"
	init_value " \"error.technical.process.mapentity\""
	cpp_decl ""
	java_decl "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${type} ${name}${value};
"
	php_decl ""
	python_decl ""
	idl_decl ""
	comment " error key. "
      end

      attribute 165220 "KEY_CANNOTMAPPING_ANNOTATION_TASK"
	class_attribute const_attribute private explicit_type "String"
	init_value " \"error.technical.task.mapentity\""
	cpp_decl ""
	java_decl "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${type} ${name}${value};
"
	php_decl ""
	python_decl ""
	idl_decl ""
	comment " error key. "
      end

      attribute 165348 "processEntities"
	private explicit_type " Class < ? >, Map < String , Method > "
	init_value "
        new HashMap < Class < ? >, Map < String , Method > >()"
	stereotype "Map"
	cpp_decl ""
	java_decl "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${stereotype}<${type}> ${name}${value};
"
	php_decl ""
	python_decl ""
	idl_decl ""
	comment " For each managed bean. Each bean will be add at first time. "
      end

      attribute 165476 "taskEntities"
	private explicit_type " Class < ? > , Map < String , Method > "
	init_value "
        new HashMap < Class < ? > , Map < String , Method > >()"
	stereotype "Map"
	cpp_decl ""
	java_decl "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${stereotype}<${type}> ${name}${value};
"
	php_decl ""
	python_decl ""
	idl_decl ""
	comment " For each managed bean. Each bean will be add at first time. "
      end

      classrelation 144356 // accessorsMap (<unidirectional association>)
	relation 144356 --->
	  stereotype "Map"
	  a role_name "accessorsMap" init_value "
        new HashMap < Class < ? > , Accessors >()" private
	    comment " tmp object to speep ud mapping. "
	    java "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${stereotype}< Class < ? >, ${type} > ${name}${value};
"
	    classrelation_ref 144356 // accessorsMap (<unidirectional association>)
	  b parent class_ref 143460 // Accessors
      end

      classrelation 144484 // instance (<unidirectional association>)
	relation 144484 --->
	  a role_name "instance" init_value " null" class_relation private
	    comment " singleton pattern. 
"
	    java "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${type} ${name}${value};
"
	    classrelation_ref 144484 // instance (<unidirectional association>)
	  b parent class_ref 143332 // BpmEntityManager
      end

      attribute 165604 "logger"
	private explicit_type "Log"
	init_value " LogFactory.getLog(getClass())"
	cpp_decl ""
	java_decl "  ${comment}${@}${visibility}${static}${final}${transient}${volatile}${type} ${name}${value};
"
	php_decl ""
	python_decl ""
	idl_decl ""
	comment " logger for this class. "
      end

      operation 196836 "getInstance"
	class_operation public return_type class_ref 143332 // BpmEntityManager
	nparams 0
	
	preserve_java_body_indent synchronized java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Singleton Pattern.

@return
     get instance from entity manager."
      end

      operation 196964 "populateProcessBean"
	public explicit_return_type "Object"
	nparams 2
	  param in name "bean" explicit_type "Class< ? >"
	  param in name "result" type class_ref 130404 // Process
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}, final ${t1} ${p1}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Map bean to target object.
@param bean
     default class bean to be used.
@param result
     result.
@return
     populated bean.
@throws Exception
"
      end

      operation 197092 "populateTaskBean"
	public explicit_return_type "Object"
	nparams 2
	  param in name "bean" explicit_type "Class< ? >"
	  param in name "result" type class_ref 131044 // Task
	
	preserve_java_body_indent final java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}, final ${t1} ${p1}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Map bean to target object.
@param bean
     default class bean to be used.
@param result
     result.
@return
     populated bean."
      end

      operation 197220 "parseProcessBean"
	private explicit_return_type "Object"
	nparams 3
	  param in name "bean" explicit_type "Class< ? >"
	  param in name "beanSetters" explicit_type "Map< String, Method >"
	  param in name "result" type class_ref 130404 // Process
	nexceptions 3
	  explicit_exception "InstantiationException"
	  explicit_exception "IllegalAccessException"
	  explicit_exception "InvocationTargetException"
	
	preserve_java_body_indent java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}, final ${t1} ${p1}, final ${t2} ${p2}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Parse Bean by reading fields and setters.

@param bean
     target bean.
@param beanSetters
     target setters map for this Bean.
@param result
     process bean returned by bpm services.
@return
     instance of target Bean.
@throws InstantiationException
     error when build bean.
@throws IllegalAccessException
     error when build bean.
@throws InvocationTargetException
     error when build bean."
      end

      operation 197348 "parseTaskBean"
	private explicit_return_type "Object"
	nparams 3
	  param in name "bean" explicit_type "Class< ? >"
	  param in name "beanSetters" explicit_type "Map< String, Method >"
	  param in name "result" type class_ref 131044 // Task
	nexceptions 3
	  explicit_exception "InstantiationException"
	  explicit_exception "IllegalAccessException"
	  explicit_exception "InvocationTargetException"
	
	preserve_java_body_indent java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}, final ${t1} ${p1}, final ${t2} ${p2}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Parse Bean by reading fields and setters.

@param bean
     target bean.
@param beanSetters
     target setters map for this Bean.
@param result
     process bean returned by bpm services.
@return
     instance of target Bean.
@throws InstantiationException
     error when build bean.
@throws IllegalAccessException
     error when build bean.
@throws InvocationTargetException
     error when build bean."
      end

      operation 197476 "registerProcessBean"
	private explicit_return_type "Map< String, Method >"
	nparams 1
	  param in name "bean" explicit_type "Class< ? >"
	
	preserve_java_body_indent java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Register Bean into.

@param bean
     bean to be process
@return
     map of key (fieldNames) and methods (setters)."
      end

      operation 197604 "registerTaskBean"
	private explicit_return_type "Map< String, Method >"
	nparams 1
	  param in name "bean" explicit_type "Class< ? >"
	
	preserve_java_body_indent java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Register Task bean.

@param bean
     bean to be process
@return
     map of key (fieldNames) and methods (setters)."
      end

      operation 197732 "parseBean"
	private explicit_return_type "Map< String, Method >"
	nparams 1
	  param in name "bean" explicit_type "Class< ? >"
	
	preserve_java_body_indent java_def "  ${comment}${@}${visibility}${final}${static}${abstract}${synchronized}${type} ${name}${(}final ${t0} ${p0}${)}${throws}${staticnl}{
  ${body}}
"
	
	
	
	comment "Parse Target class to read setters.
@param bean
     target class bean.
@return
     setters method of a bean."
      end
    end
  end

  deploymentview 131684 "orm"
    //deployment diagram settings
    package_name_in_tab default show_context default write_horizontally default auto_label_position default draw_all_relations default shadow default
    draw_component_as_icon default show_component_req_prov default show_component_rea default show_stereotype_properties default
    artifact 141668 "BpmAccessor"
      stereotype "source"
      java_src "${comment}
${package}
${imports}
import com.logica.bpm.jca.BpmDataSource;
import com.logica.bpm.jca.cci.BpmConnectionFactory;
${definition}"
      associated_classes
	class_ref 143204 // BpmAccessor
      end
    end

    artifact 141796 "BpmEntityManager"
      stereotype "source"
      java_src "${comment}
${package}
${imports}
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import com.logica.bpm.exception.BpmExceptionMessageProvider;
import com.logica.bpm.exception.orm.BpmEntityException;
import com.logica.bpm.orm.annotation.BpmField;
import com.logica.bpm.orm.annotation.ProcessEntity;
import com.logica.bpm.orm.annotation.TaskEntity;
import com.logica.bpm.orm.annotation.TechnicalProcessField;
import com.logica.bpm.orm.annotation.TechnicalProcessFieldName;
import com.logica.bpm.utils.Accessors;
${definition}"
      associated_classes
	class_ref 143332 // BpmEntityManager
      end
    end
  end

  package_ref 132964 // annotation
end
